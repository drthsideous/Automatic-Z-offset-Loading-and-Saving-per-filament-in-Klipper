[gcode_macro PROBE_OFFSET_GUARD]
description: Warn and pause if probe offset changed from known safe value
variable_safe_z: 3.07
gcode:
  {% set current = printer.configfile.settings.bltouch.z_offset|float %}
  {% set safe = safe_z|float %}

  {% if current != safe %}
    {action_respond_info("⚠️ PROBE OFFSET WARNING")}
    {action_respond_info("Expected: %.3f" % safe)}
    {action_respond_info("Current:  %.3f" % current)}
    {action_respond_info("Edit printer.cfg if accidental")}
    PAUSE
  {% endif %}